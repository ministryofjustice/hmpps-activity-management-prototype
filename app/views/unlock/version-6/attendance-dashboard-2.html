{% extends "layout_hmpps.html" %}
{% set serviceName = "Activities Management" %}

{% block pageTitle %}
Attendance dashboard
{% endblock %}

{% block primaryNavigation %}
{% endblock %}

{% block beforeContent %}
{{govukBackLink({
	text: "Back",
	"href": "javascript: window.history.go(-1)"
})}}
{% endblock %}
{% block content %}
<h1 class="govuk-heading-xl govuk-!-margin-bottom-5">
	Attendance statistics
	<span class="govuk-caption-l">
		Thursday, 2 February 2023
	</span>
</h1>
{% set dateHtml %}
{{ govukDateInput({
	id: "passport-issued",
	namePrefix: "passport-issued",
	fieldset: {
		legend: {
			text: "Date",
			isPageHeading: false,
			classes: "govuk-fieldset__legend--s"
		}
	},
	hint: {
		html: "For example, 27 1 2023.<br>The earliest date you can view is 27 January 2023."
	}
}) }}
{{govukButton({
	text: "Update results"
})}}
{% endset %}
{{ govukDetails({
	summaryText: "Choose another date",
	html: dateHtml
}) }}
<!-- <div class="govuk-grid-row card-group govuk-!-margin-bottom-0">
	<div class="govuk-grid-column-full card-group__item">
		<div class="card govuk-!-margin-bottom-3" data-test="view-residential-location">
			<div class="govuk-grid-row">
				<div class="govuk-grid-column-one-third-from-desktop">
					<h2 class="govuk-heading-m card__heading govuk-!-margin-bottom-1">
						<span class="govuk-caption-m">Daily summary</span>
						12 October 2022
					</h2>
					<p class="govuk-hint govuk-!-font-size-16">Last updated at 11.38pm on 11 October 2022</p>
					<ul class="govuk-list govuk-!-font-size-16">
						<li class="govuk-!-display-inline-bloc govuk-!-margin-right-3"><a href="#">View previous day</a></li>
					</ul>
				</div>
				<div class="govuk-grid-column-two-thirds govuk-!-padding-top-2">
					<div class="govuk-grid-row">
						<div class="govuk-grid-column-one-third">
							<h3 class="govuk-body govuk-!-margin-bottom-0 govuk-!-font-size-16">
								Court appearances
							</h3>
							<p class="govuk-body govuk-!-font-size-24"><a href="#">2</a></p>
						</div>
						<div class="govuk-grid-column-one-third">
							<h3 class="govuk-body govuk-!-margin-bottom-0 govuk-!-font-size-16">
								Releases
							</h3>
							<p class="govuk-body govuk-!-font-size-24"><a href="#">1</a></p>
						</div>
						<div class="govuk-grid-column-one-third">
							<h3 class="govuk-body govuk-!-margin-bottom-0 govuk-!-font-size-16">
								Transfers
							</h3>
							<p class="govuk-body govuk-!-font-size-24">None</p>
						</div>
					</div>
					<div class="govuk-grid-row">
						<div class="govuk-grid-column-one-third">
							<h3 class="govuk-body govuk-!-margin-bottom-0 govuk-!-font-size-16">
								Prisoners unaccounted for
							</h3>
							<p class="govuk-body govuk-!-font-size-24"><a href="#">11</a></p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> -->

<!-- <h2 class="govuk-heading-m">
	Totals for 24 January 2023
</h2> -->
{% set summaryHtml %}
<h2 class="govuk-heading-m">
	Daily summary
</h2>
<div class="govuk-grid-row">
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Total absences</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">63</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-!-font-weight-bold govuk-link--no-visited-state govuk-!-font-size-16">All absences</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Not recorded</h3>
		<span class="govuk-heading-xl govuk-!-padding-0 govuk-!-margin-0">25</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-!-font-weight-bold govuk-link--no-visited-state govuk-!-font-size-16">All not recorded</a>
		</p>
	</div>
	
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Unknown absences</h3>
		<span class="govuk-heading-xl govuk-!-padding-0 govuk-!-margin-0">5</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-!-font-weight-bold govuk-link--no-visited-state govuk-!-font-size-16">All unknown absences</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Attendance rate</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">92.6%</span>
	</div>
</div>

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

<h2 class="govuk-heading-m">
	Absences
</h2>
<div class="govuk-grid-row govuk-!-margin-bottom-5">
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Sick</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">10</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Refused</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">21</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Not required or excused</h3>
		<span class="govuk-heading-xl govuk-!-padding-0 govuk-!-margin-0">27</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>
	
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Rest day</h3>
		<span class="govuk-heading-xl govuk-!-padding-0 govuk-!-margin-0">3</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>
</div>
<div class="govuk-grid-row govuk-!-margin-bottom-5">
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Prisoner is elsewhere</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">3</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Other</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">2</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Absence reason unknown</h3>
		<span class="govuk-heading-xl govuk-!-padding-0 govuk-!-margin-0">1</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>
</div>
<div class="govuk-grid-row govuk-!-margin-bottom-5">
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Paid (acceptable) absences</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">42</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Not paid (unacceptable) absences</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">21</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>
</div>

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

<h2 class="govuk-heading-m">
	Cancellations
</h2>
<div class="govuk-grid-row govuk-!-margin-bottom-5">
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Sessions cancelled</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">2</span>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Staff unavailable</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">1</span>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Location unavailable</h3>
		<span class="govuk-heading-xl govuk-!-padding-0 govuk-!-margin-0">1</span>
	</div>
</div>

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

<h2 class="govuk-heading-m">
	Prisoners suspended
</h2>
<div class="govuk-grid-row govuk-!-margin-bottom-8">
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Suspended</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">11</span>
	</div>
</div>
{% endset %}

{% set listHtml %}
<h2 class="govuk-heading-m">
	{PERIOD} overview
</h2>
<div class="govuk-grid-row govuk-!-margin-bottom-8">
	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Attendance rate</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">92.6%</span>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Absences</h3>
		<span class="govuk-heading-xl govuk-!-margin-0 govuk-!-padding-0">63</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>

	<div class="govuk-grid-column-one-quarter">
		<h3 class="govuk-body govuk-hint govuk-!-font-size-19 govuk-!-margin-bottom-0">Not recorded</h3>
		<span class="govuk-heading-xl govuk-!-padding-0 govuk-!-margin-0">25</span>
		<p class="govuk-!-margin-bottom-0">
			<a href="#" class="govuk-link--no-visited-state govuk-!-font-size-16">View list</a>
		</p>
	</div>
</div>

<h2 class="govuk-heading-m">
	Prisoners
</h2>
<div class="app-search govuk-!-margin-bottom-6">
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-two-thirds">
			<form action="{{date}}" method="get" novalidate="">
				<div class="govuk-form-group">
					<label class="govuk-label app-search__label" for="keywords">
						Search by prisoner name
					</label>
					<input class="govuk-input app-search__input" id="keywords" name="search" type="search" value="{{data['search']}}">
				</div>
				<button class="govuk-button app-search__button" data-module="govuk-button">
					Search
				</button>
			</form>
		</div>
	</div>
</div>
<table class="govuk-table app-whereabouts-table--font-size-normal app-whereabouts-table--sticky-head" data-module="moj-sortable-table">
	<thead class="govuk-table__head">
		<tr class="govuk-table__row">
			<th scope="col" class="govuk-table__header" aria-sort="ascending" width="250">Name</th>
			<th scope="col" class="govuk-table__header" aria-sort="ascending" width="250">Prison number</th>
			<th scope="col" class="govuk-table__header" aria-sort="ascending" width="250">Activity</th>
			<th scope="col" class="govuk-table__header" aria-sort="none" style="white-space: nowrap; width: 1%;">Attendance</th>
			<th scope="col" class="govuk-table__header govuk-hint" aria-sort="none" style="white-space: nowrap; width: 1%;">Pay</th>
		</tr>
	</thead>
	<tbody class="govuk-table__body">
		{% for prisoner in data['timetable-complete-1']['prisoners'] | sort(false, true, 'name') %}
		{% set attendance = ["Attended", "Not attended"] | random %}
		<tr class="govuk-table__row">
			<td class="govuk-table__cell" data-sort-value="{{activity.name|lower}}">
				<a href="#">{{prisoner.name.firstname}} {{prisoner.name.surname}}</a>
			</td>
			<td class="govuk-table__cell" data-sort-value="{{activity.name|lower}}">
				{{prisoner.id}}
			</td>
			<td class="govuk-table__cell">
				<a href="#">Session name: location</a>
			</td>
			<td class="govuk-table__cell--numeric govuk-table__cell">
				<a href="#">{{attendance}}</a>
			</td>
			<td class="govuk-table__cell--numeric govuk-table__cell">
				{{ "&pound;1.45"|safe if attendance == "Attended" else "None" }}
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endset -%}

{{ govukTabs({
	items: [
	{
		label: "Daily summary",
		id: "summary",
		panel: {
			html: summaryHtml
		}
	},
	{
		label: "Morning (AM)",
		id: "past-week",
		panel: {
			html: listHtml
		}
	},
	{
		label: "Afternoon (PM)",
		id: "past-month",
		panel: {
			html: listHtml
		}
	},
	{
		label: "Evening (ED)",
		id: "past-year",
		panel: {
			html: listHtml
		}
	}
	]
}) }}
{% endblock %}