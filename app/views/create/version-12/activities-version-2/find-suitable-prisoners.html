{% extends "layout_hmpps.html" %} {% set serviceName = "Activities Management"
%} {% block pageTitle %} Find an activity to record or edit attendance {%
endblock %} {% block primaryNavigation %}{% endblock %} {% block beforeContent
%} {% include "./_activity-breadcrumbs.html" %} {% endblock %} {% block content
%}
<h1 class="govuk-heading-xl">Find suitable prisoners for {{activity.name}}</h1>

<div class="moj-filter-layout">
    <div class="moj-filter-layout__filter">
        <div class="moj-filter">
            <div class="moj-filter__header">
                <div class="moj-filter__header-title">
                    <h2 class="govuk-heading-m">Filter</h2>
                </div>

                <div class="moj-filter__header-action"></div>
            </div>

            <div class="moj-filter__content">
                <div class="moj-filter__selected">
                    <div class="moj-filter__selected-heading">
                        <div class="moj-filter__heading-title">
                            <h2 class="govuk-heading-m">Selected filters</h2>
                        </div>

                        <div class="moj-filter__heading-action">
                            <p>
                                <a class="govuk-link govuk-link--no-visited-state" href="">Clear filters</a>
                            </p>
                        </div>
                    </div>

                    <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Colour</h3>

                    <ul class="moj-filter-tags">
                        <li>
                            <a class="moj-filter__tag" href="#"><span class="govuk-visually-hidden">Remove this
                                    filter</span>
                                Blue</a>
                        </li>

                        <li>
                            <a class="moj-filter__tag" href="#"><span class="govuk-visually-hidden">Remove this
                                    filter</span>
                                Yellow</a>
                        </li>
                    </ul>

                    <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Status</h3>

                    <ul class="moj-filter-tags">
                        <li>
                            <a class="moj-filter__tag" href="#"><span class="govuk-visually-hidden">Remove this
                                    filter</span>
                                Complete</a>
                        </li>
                    </ul>
                </div>

                <div class="moj-filter__options">
                    <button class="govuk-button" data-module="govuk-button">
                        Apply filters
                    </button>

                    <div class="govuk-form-group">
                        <label class="govuk-label govuk-label--m" for="keywords">
                            Keywords
                        </label>

                        <input class="govuk-input" id="keywords" name="keywords" type="text" />
                    </div>

                    <div class="govuk-form-group">
                        <fieldset class="govuk-fieldset">
                            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                                Colour
                            </legend>

                            <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                                <div class="govuk-checkboxes__item">
                                    <input class="govuk-checkboxes__input" id="type" name="type" type="checkbox"
                                        value="1" checked />
                                    <label class="govuk-label govuk-checkboxes__label" for="type">
                                        Blue (18)
                                    </label>
                                </div>

                                <div class="govuk-checkboxes__item">
                                    <input class="govuk-checkboxes__input" id="type-2" name="type" type="checkbox"
                                        value="2" checked />
                                    <label class="govuk-label govuk-checkboxes__label" for="type-2">
                                        Yellow (5)
                                    </label>
                                </div>

                                <div class="govuk-checkboxes__item">
                                    <input class="govuk-checkboxes__input" id="type-3" name="type" type="checkbox"
                                        value="3" />
                                    <label class="govuk-label govuk-checkboxes__label" for="type-3">
                                        Red (2)
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                    </div>

                    <div class="govuk-form-group">
                        <fieldset class="govuk-fieldset">
                            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                                Status
                            </legend>

                            <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                                <div class="govuk-checkboxes__item">
                                    <input class="govuk-checkboxes__input" id="status" name="status" type="checkbox"
                                        value="1" checked />
                                    <label class="govuk-label govuk-checkboxes__label" for="status">
                                        Complete (5)
                                    </label>
                                </div>

                                <div class="govuk-checkboxes__item">
                                    <input class="govuk-checkboxes__input" id="status-2" name="status" type="checkbox"
                                        value="2" />
                                    <label class="govuk-label govuk-checkboxes__label" for="status-2">
                                        Incomplete (3)
                                    </label>
                                </div>

                                <div class="govuk-checkboxes__item">
                                    <input class="govuk-checkboxes__input" id="status-3" name="status" type="checkbox"
                                        value="3" />
                                    <label class="govuk-label govuk-checkboxes__label" for="status-3">
                                        In progress (13)
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="moj-filter-layout__content">
        <div class="moj-action-bar">
            <div class="moj-action-bar__filter"></div>

            <div class="moj-button-menu">
                
            </div>
        </div>

        <div class="moj-scrollable-pane">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <div class="moj-search govuk-!-margin-bottom-6">
                        <form action="other-prisoners" method="get" novalidate="">
                            <div class="govuk-form-group">
                                <label class="govuk-label moj-search__label govuk-!-font-weight-bold" for="name">
                                    Search by name or prison number
                                </label>
                                <input class="govuk-input moj-search__input " id="name" name="search" type="search"
                                    value="{{data['person-search']}}">
                            </div>
                            <button class="govuk-button moj-search__button" data-module="govuk-button">
                                Search
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- GOVUK table HTML for prisoner list -->
            <!-- each prisoner should have a radio button to select them -->
            <table class="govuk-table" id="list">
                <caption class="govuk-table__caption govuk-table__caption--m">
                    {{data['timetable-complete-1']['prisoners']|getOtherPrisonersCount(activity.id)}} people are not
                    allocated to
                    this activity
                </caption>
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th scope="col" class="govuk-table__header" aria-sort="none">Prisoner</th>
                        <th scope="col" class="govuk-table__header" aria-sort="ascending">Non-associations</th>
                        <th scope="col" class="govuk-table__header" aria-sort="none">Current allocation</th>
                        <th scope="col" class="govuk-table__header" aria-sort="none">Education level held</th>
                        <th scope="col" class="govuk-table__header" aria-sort="none">Earliest release date</th>
                        <th scope="col" class="govuk-table__header govuk-table__header--numeric" aria-sort="none">Other
                            waitlists</th>
                        <th scope="col" class="govuk-table__header"></th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    {% for prisoner in suitablePrisonersPaginated | sort(false, false, 'activity') %}
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell">
                            <div class="govuk-radios govuk-radios--small" data-module="govuk-radios">
                                <div class="govuk-radios__item">
                                    <input class="govuk-radios__input" id="allocated-prisoner-{{prisoner.id}}"
                                        name="prisonerId" type="radio" value="{{prisoner.id}}">
                                    <label class="govuk-label govuk-radios__label"
                                        for="allocated-prisoner-{{prisoner.id}}">
                                        <b><a href="#" class="govuk-link--no-visited-state">{{prisoner.name.firstname}}
                                                {{prisoner.name.surname}}</a></b><br>
                                        {{prisoner.id}}<br>
                                        {{prisoner.location.cell}}
                                    </label>
                                </div>
                            </div>
                        </td>
                        <td class="govuk-table__cell" data-sort-value="{{application.date}}">
                            {% if loop.index == 4 %}
                            <a href="#" class="govuk-link--no-visited-state">Joe Bloggs</a>
                            {% elif loop.index == 5 %}
                            <ul class="govuk-list">
                                <li><a href="#" class="govuk-link--no-visited-state">Joe Bloggs</a></li>
                                <li><a href="#" class="govuk-link--no-visited-state">Bob Smith</a></li>
                            </ul>
                            {% else %}
                            <span class="govuk-hint">None</span>
                            {% endif %}
                        </td>
                        <td class="govuk-table__cell">
                            <ul class="govuk-list">
                                <!-- {% if prisoner.activity|length == 0 %}
                                <span class="govuk-hint">None</span>
                                {% endif %}
                                {% for allocation in prisoner.activity %}
                                {% set activity = allocation|getActivityDetails %}
                                <li><a href="../{{activity.id}}" class="govuk-link--no-visited-state">{{activity.name}}</a></li>
                                {% endfor %} -->
                                <li><span class="govuk-hint">None</span></li>
                            </ul>
                        </td>
                        <td class="govuk-table__cell">
                            <ul class="govuk-list">
                                {% if loop.index == 5 or loop.index == 3 %}
                                <li><span class="govuk-hint">N/A</span></li>
                                {% else %}
                                <li>English level 1</li>
                                {% endif %}
                            </ul>
                        </td>
                        <td class="govuk-table__cell" data-sort-value="{{prisoner.releaseDate}}">
                            {{prisoner.releaseDate|convertShortDateToMediumDate}}
                        </td>
                        <td class="govuk-table__cell" data-sort-value="{{prisoner.releaseDate}}"
                            style="text-align: center;">
                            <ul class="govuk-list">
                                {% if (loop.index == 1 and data['page'] == 1) or (loop.index == 2 and data['page'] == 1)
                                %}
                                <li>0</li>
                                {% else %}
                                <li>1</li>
                                {% endif %}
                            </ul>
                        </td>
                        <td class="govuk-table__cell">
                            <a href="allocate/{{prisoner.id}}" class="govuk-link--no-visited-state">Allocate</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- PAGINATION -->
            <nav class="moj-pagination" aria-label="Pagination navigation">
                <ul class="moj-pagination__list">
                    {% if data.page > 1 %}
                    <li class="moj-pagination__item  moj-pagination__item--prev">
                        <a class="moj-pagination__link" href="?page={{data.page|int - 1|int}}#list">Previous<span
                                class="govuk-visually-hidden"> page</span></a>
                    </li>
                    {% endif %}

                    {% for page in range(1, 6) %}
                    <li class="moj-pagination__item {% if page == data.page %}moj-pagination__item--active{% endif %}">
                        {% if page != data.page %}
                        <a class="moj-pagination__link" href="?page={{page}}#list"
                            aria-label="Page {{page}} of {{totalPages}}">{{page}}</a>
                        {% else %}
                        {{page}}
                        {% endif %}
                    </li>
                    {% endfor %}

                    {% if data.page < 5 %} <li class="moj-pagination__item  moj-pagination__item--next">
                        <a class="moj-pagination__link" href="?page={{data.page|int + 1|int}}#list">Next<span
                                class="govuk-visually-hidden"> page</span></a>
                        </li>
                        {% endif %}
                </ul>
                <p class="moj-pagination__results">Showing <b>{{offset+1}}</b> to <b>{{offset+limit}}</b> of
                    <b>{{5*limit}}</b>
                    people</p>
            </nav>
        </div>
    </div>
</div>

{% endblock %}

{% block pageScripts %}
<script type="text/javascript">
    $(document).ready(function () {
        new MOJFrontend.FilterToggleButton({
            bigModeMediaQuery: "(min-width: 48.063em)",
            startHidden: true,
            toggleButton: {
                container: $(".moj-action-bar__filter"),
                showText: "Show filter",
                hideText: "Hide filter",
                classes: "govuk-button--secondary",
            },
            closeButton: {
                container: $(".moj-filter__header-action"),
                text: "Close",
            },
            filter: {
                container: $(".moj-filter"),
            },
        });
    })
</script>
{% endblock %}