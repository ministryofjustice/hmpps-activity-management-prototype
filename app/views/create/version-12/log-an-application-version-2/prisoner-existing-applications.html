{% extends "layout_hmpps.html" %}
{% block pageTitle %}
Activities Management prototype
{% endblock %}

{% block primaryNavigation %} {% endblock %}

{% block beforeContent %}
{{govukBackLink({ text: "Back", "href": "javascript:
window.history.go(-1)" })}} {% endblock %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-l">
            Activity request history for {{prisoner.name.firstname}} {{prisoner.name.surname}}
        </h1>

        <p>
            Use the history to decide if the request should be reviewed in full.
            </p>
        <p>
            It might not be valid if, for example, the person has already requested allocation to this activity, or has reached the maximum number of requests.
        </p>
    
        <form method="post">
            <input type="hidden" name="new-application['selected-prisoner']" value="{{prisoner.id}}">

            <table class="govuk-table govuk-!-margin-bottom-8" data-module="moj-sortable-table">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th scope="col" class="govuk-table__header" aria-sort="none" style="width:33%"><button
                                type="button" data-index="0">Activity requested</button></th>
                        <th scope="col" class="govuk-table__header" aria-sort="descending" style="width:33%"><button
                                type="button" data-index="1">Date of request</button></th>
                        <th scope="col" class="govuk-table__header" aria-sort="none" style="width:33%"><button
                                type="button" data-index="2">Decision</button></th>
                        <th scope="col" class="govuk-table__header" style="width:28%"></th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    <tr class="govuk-table__row">
                        <td data-sort-value="Kitchens" class="govuk-table__cell">
                            <strong><a href="# target=" _blank"="">Kitchens</a></strong><br>
                        </td>
                        <td class="govuk-table__cell" data-sort-value="20230205">5 February 2023</td>
                        <td class="govuk-table__cell" data-sort-value="Approved">
                            <span class="govuk-tag govuk-tag--red">Rejected</span>
                        </td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td data-sort-value="Servery" class="govuk-table__cell">
                            <strong><a href="/unlock/version-5/prisoner-profile"
                                    target="_blank">Servery</a></strong><br>
                        </td>
                        <td class="govuk-table__cell" data-sort-value="20221209">9 December 2022</td>
                        <td class="govuk-table__cell" data-sort-value="On waitlist">
                            <span class="govuk-tag govuk-tag--red">Rejected</span>
                        </td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td data-sort-value="Electronics" class="govuk-table__cell">
                            <strong><a href="/unlock/version-5/prisoner-profile"
                                    target="_blank">Electronics</a></strong><br>
                        </td>
                        <td class="govuk-table__cell" data-sort-value="20230201">1 February 2023</td>
                        <td class="govuk-table__cell" data-sort-value="Pending">
                            <span class="govuk-tag govuk-tag--green">Accepted</span>
                        </td>
                    </tr>
                    <tr class="govuk-table__row">
                        <td data-sort-value="Gardens" class="govuk-table__cell">
                            <strong><a href="/unlock/version-5/prisoner-profile"
                                    target="_blank">Gardens</a></strong><br>
                        </td>
                        <td class="govuk-table__cell" data-sort-value="20230121">21 January 2023</td>
                        <td class="govuk-table__cell" data-sort-value="Rejected">
                            <span class="govuk-tag govuk-tag--green">Accepted</span>
                        </td>
                    </tr>

                </tbody>
            </table>

            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    {% set reasonHtml %}
                    {{ govukTextarea({
                    id: "reject-new-application-reason",
                    name: "reject-new-application-reason",
                    label: {
                    text: "Reason for rejection"
                    },
                    hint: {
                    text: "This will be sent to the requestor"
                    }
                    }) }}
                    {% endset %}

                    {{ govukRadios({
                    idPrefix: "log-new-application",
                    name: "log-new-application",
                    fieldset: {
                    legend: {
                    text: "Is the request valid?",
                    isPageHeading: false,
                    classes: "govuk-fieldset__legend--l"
                    }
                    },
                    items: [
                    {
                    value: "yes",
                    text: "Yes, it's a valid request and I want to review it"
                    },
                    {
                    value: "no",
                    text: "No, it's not a valid request. I will inform the person who made the request that it won't be reviewed and why.",
                    conditional: {
                    html: reasonHtml
                    }
                    }
                    ]
                    }) }}
                    {{govukButton({
                    text: "Continue"
                    })}}
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock %}