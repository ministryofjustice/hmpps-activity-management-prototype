{% extends "layout_hmpps.html" %}
{% block pageTitle %}
Activities Management prototype
{% endblock %}

{% block primaryNavigation %} {% endblock %}

{% block beforeContent %}
{{govukBackLink({ text: "Back", "href": "javascript:
window.history.go(-1)" })}} {% endblock %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <form method="post">
            <span class="govuk-caption-l">
                {{activity.name}}
            </span>

            <h1 class="govuk-heading-xl">
                Check the capacity of this activity before you update it
            </h1>

            {% set difference = currentlyAllocatedCount - data['capacity'] %}

            {% set noun = "people" %}
            {% if difference == 1 %}
            {% set noun = "person" %}
            {% endif %}

            <p class="govuk-body">
                You are about to reduce the capacity of this activity. The activity will be {{difference}} {{noun}} over capacity.
            </p>

            <div class="govuk-summary-list">
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        Current capacity
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {{activity.capacity}}
                    </dd>
                </div>
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        People currently allocated
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {{currentlyAllocatedCount}}
                    </dd>
                </div>
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        New capacity
                    </dt>
                    <dd class="govuk-summary-list__value">
                        {{data['capacity']}}
                    </dd>
                    <dd class="govuk-summary-list__actions">
                        <a href="capacity" class="govuk-link">Change</a>
                    </dd>
                </div>
            </div>

            <p>
                You can reduce the number of people currently allocated to this activity before you change the capacity of the activity.
            </p>

            {{ govukWarningText({
            text: "The activity will be over capacity if you continue."
            }) }}            
            
            {{ govukButton({
            text: "Confirm capacity change",
            classes: "govuk-button--warning"
            }) }}

            <p>
                <a href="../details" class="govuk-link govuk-link--no-visited-state">Cancel</a>
            </p>
        </form>
    </div>
</div>

{% endblock %}