{% extends "layout_hmpps.html" %}
{% block pageTitle %}
Activities Management prototype
{% endblock %}

{% block primaryNavigation %} {% endblock %}

{% block beforeContent %}
{{govukBackLink({
text: "Back",
"href": "javascript: window.history.go(-1)"
})}}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        {% if application and application.status == 'pending' %}

        {% endif %}
        
        {% set activity = application['activity'] | getActivityDetails %}
        {% set prisoner = data['new-activity']['prisoner'] %}
        <h1 class="govuk-heading-xl">
            Check before you allocate {{prisoner.name.firstname}} {{prisoner.name.surname}}
        </h1>

        {% if application and application.status != 'rejected' %}
        <h2 class="govuk-heading-m">
            {{prisoner.name.firstname}} {{prisoner.name.surname}}'s request for {{activity.name}}
        </h2>
        <dl class="govuk-summary-list govuk-!-margin-bottom-8">
            <!-- <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Prisoner
                </dt>
                <dd class="govuk-summary-list__value">
                    {{prisoner.name.firstname}} {{prisoner.name.surname}}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="#">
                        Change<span class="govuk-visually-hidden"> asd's pizza</span>
                    </a>
                </dd>
            </div> -->
            <div class="govuk-summary-list__row govuk-summary-list__row--no-actions">
                <dt class="govuk-summary-list__key">
                    Date of request
                </dt>
                <dd class="govuk-summary-list__value">
                    {{application['date']|convertShortDateToLongDate}}
                </dd>
            </div>
            <div class="govuk-summary-list__row govuk-summary-list__row--no-actions">
                <dt class="govuk-summary-list__key">
                    Requestor
                </dt>
                <dd class="govuk-summary-list__value">
                    {% if application['applicant'] == 'prisoner' %}
                    Prisoner
                    {% else %}
                    {{application['applicant']|capitalize}}
                    {% endif %}
                </dd>
            </div>
            <div class="govuk-summary-list__row govuk-summary-list__row--no-actions">
                <dt class="govuk-summary-list__key">
                    Suitability
                </dt>
                <dd class="govuk-summary-list__value">
                    {% if application['eligible'] == 'yes' %}
                    <span class="govuk-tag govuk-tag--green">Eligible</span>
                    {% elif application['eligible'] == 'no' %}
                    <span class="govuk-tag govuk-tag--red">Not eligible</span>
                    {% else %}
                    <span class="govuk-tag govuk-tag--yellow">Further checks needed</span>
                    {% endif %}
                </dd>
            </div>
        </dl>
        {% endif %}
        
        <h2 class="govuk-heading-m">
            Prisoner eligibility details
        </h2>
        <dl class="govuk-summary-list govuk-!-margin-bottom-9">
            <div class="govuk-summary-list__row govuk-summary-list__row--no-actions">
                <dt class="govuk-summary-list__key">
                    Workplace risk assessment level
                </dt>
                <dd class="govuk-summary-list__value">
                    Low
                </dd>
                <dd class="govuk-summary-list__value">
                    <span class="govuk-tag govuk-tag--green">Suitable</span>
                </dd>
            </div>
            <div class="govuk-summary-list__row govuk-summary-list__row--no-actions">
                <dt class="govuk-summary-list__key">
                    Incentive level
                </dt>
                <dd class="govuk-summary-list__value">
                    Standard
                </dd>
                <dd class="govuk-summary-list__value">
                    <span class="govuk-tag govuk-tag--red">Not suitable</span>
                </dd>
            </div>
            <div class="govuk-summary-list__row govuk-summary-list__row--no-actions">
                <dt class="govuk-summary-list__key">
                    Education levels
                </dt>
                <dd class="govuk-summary-list__value">
                    English level 1
                </dd>
                <dd class="govuk-summary-list__value">
                    <span class="govuk-tag govuk-tag--green">Suitable</span>
                </dd>
            </div>
        </dl>

        {{ govukSummaryList({
        rows: [
        {
        key: {
        text: "Earliest release date",
        classes: "govuk-summary-list__row--no-actions"
        },
        value: {
        text: "21 September 2029",
        classes: "govuk-summary-list__row--no-actions"
        }
        },
        {
        key: {
        text: "Non-associations"
        },
        value: {
        html: '<a href="#" class="govuk-link--no-visited-state">Junior Smith</a>'
        }
        }
        ]
        })
        }}

        <p class="govuk-!-margin-bottom-8 govuk-inset-text">
            <a href="#">View {{prisoner.name.firstname}} {{prisoner.name.surname}}'s profile</a> or consult with other
            departments if you need more information.
        </p>

        <form method="post" class="govuk-!-margin-top-8">
            {{govukRadios({
            idPrefix: "application-status",
            name: "allocate",
            fieldset: {
            legend: {
            text: "Confirm you want to allocate this prisoner to this activity",
            isPageHeading: true,
            classes: "govuk-fieldset__legend--m"
            }
            },
            items: [
            {
            value: "yes",
            html: "Yes, continue to select payrate for " + prisoner.name.firstname + " " + prisoner.name.surname
            },
            {
            value: "no",
            html: "No, return to activity details"
            }
            ]
            })}}

            {{ govukButton({
            text: "Continue"
            }) }}
        </form>
    </div>
</div>

{% endblock %}