{% extends "layout_hmpps.html" %}
{% set serviceName = "Activities Management" %}
{% set activitiesCount = activitiesForDate.morning|length + activitiesForDate.afternoon|length %}

{% block pageTitle %}
Find an activity to record or edit attendance
{% endblock %}

{% block primaryNavigation %}
{% endblock %}

{% block beforeContent %}
{% include "./_activity-breadcrumbs.html" %}
{% endblock %}

{% block content %}

{% include "./_activity-header.html" %}
<h2 class="govuk-heading-l">
    Other prisoners
</h2>
<!-- <p>
    All applications shown below are pending. They have not been approved or rejected yet.
</p> -->
<!-- {{govukButton({
text: "Select prisoner",
href: "../../log-an-application-version-2?new-application[activity]=" + activity.id
})}} -->
<table class="govuk-table moj-sortable-table" data-module="moj-sortable-table">
    <caption class="govuk-table__caption govuk-table__caption--m">
        {{activity.id|getOtherPrisonersCount}} prisoners
    </caption>
    <thead class="govuk-table__head">
        <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header" aria-sort="none">Prisoner</th>
            <th scope="col" class="govuk-table__header" aria-sort="ascending">Non-associations</th>
            <th scope="col" class="govuk-table__header" aria-sort="none">Other allocations</th>
            <th scope="col" class="govuk-table__header" aria-sort="none">Past applications</th>
            <th scope="col" class="govuk-table__header"></th>
        </tr>
    </thead>
    <tbody class="govuk-table__body">
        {% for prisoner in prisonersWithoutApplication %}
        <tr class="govuk-table__row">
            <td class="govuk-table__cell">
                <b><a href="#" class="govuk-link--no-visited-state">{{prisoner.name.firstname}}
                        {{prisoner.name.surname}}</a></b><br>
                {{prisoner.id}}<br>
                {{prisoner.location.cell}}
            </td>
            <td class="govuk-table__cell govuk-!-padding-top-4" data-sort-value="{{application.date}}">
                None
            </td>
            <td class="govuk-table__cell govuk-!-padding-top-4">
                <ul class="govuk-list">
                    {% if prisoner.activity|length == 0 %}
                    <span class="govuk-hint">None</span>
                    {% endif %}
                    {% for allocation in prisoner.activity %}
                    {% set activity = allocation|getActivityDetails %}
                    <li><a href="../{{activity.id}}" class="govuk-link--no-visited-state">{{activity.name}}</a></li>
                    {% endfor %}
                </ul>
            </td>
            <td class="govuk-table__cell govuk-!-padding-top-4">
                None
            </td>
            <td class="govuk-table__cell govuk-!-padding-top-4">
                <a href="allocate/{{prisoner.id}}" class="govuk-link--no-visited-state">Check eligibility</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block pageScripts %}
{% endblock %}