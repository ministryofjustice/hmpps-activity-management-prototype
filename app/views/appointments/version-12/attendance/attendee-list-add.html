{% extends "layout_hmpps.html" %}
{% set serviceName = "Appointments" %}

{% block pageTitle %}
Appointments prototype
{% endblock %}

{% block primaryNavigation %}
{% endblock %}

{% block main %}
   <div class="govuk-width-container"> 

        <main class="govuk-main-wrapper govuk-main-wrapper--auto-spacing" id="main-content" role="main"> 
            <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
              <div class="back">
                <a href="#" onclick="history.back()" class="govuk-back-link">Back</a>
                </div>
				    <h1 class="govuk-heading-l"> 
					    <span class="govuk-caption-l">Substance misuse services</span>
					    Record attendance
				    </h1>

            <form method="post" action="upload-or-per-person">
            <div class="govuk-button-group">
              <button class="govuk-button govuk-button--blue" data-module="govuk-button">
               Print attendance list
             </button>
   

             {{govukButton({
              text: "Add extra attendees",
              classes: "govuk-button--secondary",
              attributes: {
                "formaction": "upload-or-per-person",
                "formmethod": "get"
                }
              })}}
            </div>

          </form>
  
				   <table
				   class="govuk-table app-toolbar-table app-whereabouts-table--sticky-head "
				   data-module="moj-multi-select" data-multi-select-checkbox="#select-all">
                  <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                      <th class="govuk-table__header" scope="col" id="select-all"></th>
                      <th class="govuk-table__header" aria-sort="none">
                        <button type="button" data-index="0">
                          Name
                        </button>
                      </th> 
                      <th class="govuk-table__header">
                        Attendance
                      </th> 
                    </tr>
                  </thead>
                  <tbody class="govuk-table__body">


                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Abraham Arby, E2405E</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Abraham, </b>Amby</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">E2405E </span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>


                    <tr class="govuk-table__row govuk-table__row--selected" >
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Bert Hungerford, A3123DF</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Hungerford, </b>Bert</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">C2598E </span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Matthew Doyle, E4911C</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Doyle, </b>Matthew</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">E4911C</span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Ryan Gee, E4911C</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Gee, </b>Ryan</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">F5132C</span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Robin Bab, F4933A</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Bab, </b>Robin</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">F4933A</span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Tommy-Lee Knox, C8361E</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Knox, </b>Tommy-Lee</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">C8361E</span>
                      </td> 
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
						
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <!-- <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Fuentes Rasmussen, E2405E</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Rasmussen, </b>Fuentes </a><br>
                        <span class="govuk-hint govuk-!-font-size-16"></span>
                      </td>
                      <td class="govuk-table__cell" data-sort-value="112" scope="col">
                        E2405E
                      </td>
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        1-3-2
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Luther Drove, E2405E</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Drove, </b>Luther</a><br>
                        <span class="govuk-hint govuk-!-font-size-16"></span>
                      </td>
                      <td class="govuk-table__cell" data-sort-value="112" scope="col">
                        E2405E 
                      </td>
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        2-2-2
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Logan Looker, C7950C</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Looker, </b>Logan</a><br>
                        <span class="govuk-hint govuk-!-font-size-16"></span>
                      </td>
                      <td class="govuk-table__cell" data-sort-value="112" scope="col">
                        C7950C
                      </td>
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        1-1-1
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Eric Sykes, B9295C</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Sykes, </b>Eric</a><br>
                        <span class="govuk-hint govuk-!-font-size-16"></span>
                      </td>
                      <td class="govuk-table__cell" data-sort-value="112" scope="col">
                        B9295C
                      </td>
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        1-4-5
                      </td>
                    </tr> -->
                    
                  </tbody>
                </table>

			

                <a class="govuk-link" href="#">Back to appointment summary</a>
			


            </div>
          </div> 

		</div>
 
        </main>

	{% include '../_includes/attendance-toolbar.html' %}
  

{% endblock %}
 

{% block pageScripts %}
<script type="text/javascript">
	$(document).ready(function () {
		function toggleToolbar(btn) {
			let checkbox = $('.app-toolbar-table input[type="checkbox"]')
			let count = checkbox.filter(':checked').length - $('th .moj-multi-select__checkbox input:checkbox:checked').length

			if (!btn.data('html')) {
				$.each(btn, function () {
					$(this).attr('data-html', $(this).html())
				})

				$('#app-selected-count').attr('data-html', $('#app-selected-count').html())
			}

			if (checkbox.is(':checked')) {
				let countText = (count > 1) ? "attendees" : "attendee"

				$('#app-selected-count').html(count + " " + countText + " selected")

				$.each(btn, function () {
					$(this).attr("disabled", false).html($(this).data('html'))
				})

				$('.app-attendance-sticky-bar--bottom').addClass('active').attr("aria-disabled", false).find('.govuk-button-group').show()
			} else {
				$.each(btn, function () {
					$(this).attr("disabled", true).html($(this).data('html'))
				})

				$('.app-attendance-sticky-bar--bottom').removeClass('active').attr("aria-disabled", true).find('.govuk-button-group').hide()
				$('#app-selected-count').html($('#app-selected-count').data('html'))
			}
		}
		$(window).load(function () {
			toggleToolbar($('.app-attendance-btn'))
		})
		$('.app-toolbar-table input[type="checkbox"]').on('change', function () {
			toggleToolbar($('.app-attendance-btn'))
		})

		const el = document.querySelector(".app-attendance-sticky-bar--bottom")
		const observer = new IntersectionObserver(
			([e]) => e.target.classList.toggle("is-pinned", e.intersectionRatio < 1),
			{ threshold: [1] }
		);

		observer.observe(el);
	})
</script>
 
{% endblock %}
