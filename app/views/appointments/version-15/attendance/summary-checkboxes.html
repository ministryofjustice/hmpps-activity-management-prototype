{% extends "layout_hmpps.html" %}
{% block pageTitle %}
Appointments prototype
{% endblock %}

{% block primaryNavigation %}
{% endblock %}




{% block main %}

<form method="post" action="apply-to">
<div class="govuk-width-container">   
  {% block beforeContent %}
    <nav class="govuk-!-display-none-print">
    {{govukBackLink({
      text: "Back",
      "href": "javascript: window.history.go(-1)"
      })}} 
      <a href="../dps-home.html" class="govuk-link govuk-link--no-visited-state govuk-!-margin-top-3 govuk-!-margin-bottom-3 float-right">
        Go to all appointments tasks
      </a>
    </nav>
  {% endblock %}


  <main class="govuk-main-wrapper govuk-main-wrapper--auto-spacing" id="main-content" role="main"> 
        <div class="govuk-grid-row">
         
          <div class="govuk-grid-column-two-thirds-from-desktop">
          
              {% if data['edit-appt'] === 'add-person' %}

              {% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

              {% set html %}
                <h3 class="govuk-notification-banner__heading">
                  You've added Jamie Marke to this appointment
                </h3>
                
              {% endset %}

              {{ govukNotificationBanner({
                html: html,
                type: 'success'
              }) }}
          
              {% elif data['edit-appt'] === 'remove-person' %}

              {% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

              {% set html %}
                <h3 class="govuk-notification-banner__heading">
                  You've removed Danny Kaplansky from this appointment
                </h3>
                
              {% endset %}

              {{ govukNotificationBanner({
                html: html,
                type: 'success'
              }) }}
    
          
              {% elif data['edit-appt'] === 'extra-information' %}

              {% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

              {% set html %}
                <h3 class="govuk-notification-banner__heading">
                  You've changed the extra information for this appointment
                </h3>
                
              {% endset %}

              {{ govukNotificationBanner({
                html: html,
                type: 'success'
              }) }}
          
              {% elif data['edit-appt'] === 'date-time' %}

              {% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

              {% set html %}
                <h3 class="govuk-notification-banner__heading">
                  You've changed the date and time for this appointment
                </h3>
                
              {% endset %}

              {{ govukNotificationBanner({
                html: html,
                type: 'success'
              }) }}
          
              {% elif data['edit-appt'] === 'location' %}

              {% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

              {% set html %}
                <h3 class="govuk-notification-banner__heading">
                  You've changed the location for this appointment
                </h3>
                
              {% endset %}

              {{ govukNotificationBanner({
                html: html,
                type: 'success'
              }) }} 
              {% endif %}
            <h1 class="govuk-heading-l">
              <span class="govuk-caption-l">Manage appointments</span>
              
              {% if data['alt-appointment-name'] !='' %}

              {{ data['alt-appointment-name']}} ({{ data['apppointment-type']}})

              {% else %}
              
              {{ data['apppointment-type']}}
              {% endif %}
              <span class="govuk-caption-m govuk-!-margin-top-2">Tuesday, {{ data['date-of-appointment-day']}} October 2023</span>
             </h1>

             <div class="govuk-summary-card">
              <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">Series details</h2>
                <ul class="govuk-summary-card__actions">
                  <li class="govuk-summary-card__action"> <a class="govuk-link" href="../repeating/overview">
                      View series
                    </a>
                  </li>
                </ul>
              </div>
              <div class="govuk-summary-card__content">
                <dl class="govuk-summary-list">
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Frequency
                    </dt>
                    <dd class="govuk-summary-list__value">
                      {{ data['appointment-frequency']}}  
                    </dd>
                  </div>
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Appointment
                    </dt>
                    <dd class="govuk-summary-list__value">
                      1 of {{ data['number-of-appointments']}} 
                    </dd>
                  </div>
                </dl>
              </div>
            </div>

            <div class="govuk-summary-card">
              <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">Appointment details</h2>
                <ul class="govuk-summary-card__actions">
                  <li class="govuk-summary-card__action"> <a class="govuk-link" href="../../cancel/repeat/cancel-question">
                      Cancel appointment
                    </a>
                  </li>
                </ul>
              </div>
              <div class="govuk-summary-card__content"> 
                <dl class="govuk-summary-list">

                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Appointment name
                    </dt>
                    <dd class="govuk-summary-list__value">
                      
                    {% if data['alt-appointment-name'] !='' %}

                    {{ data['alt-appointment-name']}} ({{ data['apppointment-type']}})
    
                    {% else %}
                    
                    {{ data['apppointment-type']}}
                    {% endif %}
                    </dd> 
                    <!-- <dd class="govuk-summary-list__actions">
                      <a class="govuk-link" href="#">
                        Change <span class="govuk-visually-hidden">  type</span>
                      </a>
                    </dd> -->
                  </div> 

                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Location
                    </dt>
                    <dd class="govuk-summary-list__value">
                    {{ data['apppointment-location']}}
                    </dd>
                    <dd class="govuk-summary-list__actions">
                      <a class="govuk-link" href="../../edit/location-repeating/location">
                        Change <span class="govuk-visually-hidden">  location</span>
                      </a>
                    </dd>
                  </div>
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Date
                    </dt>
                    <dd class="govuk-summary-list__value">
                      {{ data['date-of-appointment-day']}} July 2023
                    </dd>
                    <dd class="govuk-summary-list__actions">
                      <a class="govuk-link" href="../../edit/date-time-repeating/date-of-appointment">
                        Change <span class="govuk-visually-hidden"> date</span>
                      </a>
                    </dd>
                  </div>
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Start time
                    </dt>
                    <dd class="govuk-summary-list__value">
                      {{ data['start-hours']}}:{{ data['start-minutes']}}  
                    </dd>
                    <dd class="govuk-summary-list__actions">
                      <a class="govuk-link" href="../../edit/date-time-repeating/date-of-appointment">
                        Change <span class="govuk-visually-hidden"> start time</span>
                      </a>
                    </dd>
                  </div>
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      End time
                    </dt>
                    <dd class="govuk-summary-list__value">
                      {{ data['end-hours']}}:{{ data['end-minutes']}}  
                    </dd>
                    <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="../../edit/date-time-repeating/date-of-appointment">
                        Change <span class="govuk-visually-hidden"> end time</span>
                      </a>
                    </dd>
                  </div>
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Extra information
                    </dt>
                    <dd class="govuk-summary-list__value">
                      {{ data['more-detail']}}
                    </dd>
                    <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="../../edit/extra-information-repeating/comments">
                        Change <span class="govuk-visually-hidden"> extra information</span>
                      </a>
                    </dd>
                  </div>
                 </dl>
              </div>
            </div>

            <div class="govuk-button-group">

              {{govukButton({
                text: "Print attendance list",
                classes: "govuk-button--blue moj-button-menu__item govuk-!-margin-bottom-0",
                attributes: {
                "data-module": "govuk-button"
                },
                href: "print-attendee-list"
                })}} 

              {{govukButton({
                text: "Print movement slips",
                classes: "govuk-button--blue moj-button-menu__item govuk-!-margin-bottom-0",
                attributes: {
                "data-module": "govuk-button"
                },
                href: "../appointment-management/appointment-summary/repeating/movement-slip-example"
                })}}
              
                <!-- <a class="govuk-link" href="attendee-list-add"> Record attendance </a> -->
                <!-- <a class="govuk-link" href="../appointment-management/appointment-summary/repeating/movement-slip-example">
                  Preview printed movement slips
                </a> -->
              </div>
          

             <div class="govuk-summary-card">
              <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">8 attendees</h2>
                <ul class="govuk-summary-card__actions">
<!--                   
                  <li class="govuk-summary-card__action"> 
                    <a class="govuk-link" href="../appointment-management/appointment-summary/repeating/movement-slip-example">
                      Preview printed movement slips
                    </a>
                </li> --> 
                  <li class="govuk-summary-card__action" style=""> <a class="govuk-link" href="../appointment-management/edit/appointment-list/add/upload-or-per-person">
                      Add attendees
                    </a>
                  </li>
                </ul>
              </div>
              <div class="govuk-summary-card__content">
                  
				   <table
				   class="govuk-table app-toolbar-table app-whereabouts-table--sticky-head "
				   data-module="moj-multi-select" data-multi-select-checkbox="#select-all">
                  <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                      <th class="govuk-table__header" scope="col" id="select-all"></th>
                      <th class="govuk-table__header" aria-sort="none">
                        <button type="button" data-index="0">
                          Name
                        </button>
                      </th> 
                      <th class="govuk-table__header">
                        Attendance
                      </th> 
                    </tr>
                  </thead>
                  <tbody class="govuk-table__body">


                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Abraham Arby, E2405E</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Abraham, </b>Amby</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">E2405E </span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>


                    <tr class="govuk-table__row govuk-table__row--selected" >
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Bert Hungerford, A3123DF</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Hungerford, </b>Bert</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">C2598E </span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Matthew Doyle, E4911C</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Doyle, </b>Matthew</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">E4911C</span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Ryan Gee, E4911C</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Gee, </b>Ryan</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">F5132C</span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Robin Bab, F4933A</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Bab, </b>Robin</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">F4933A</span>
                      </td> 
                    
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
                        
                        <ul class="govuk-list govuk-!-margin-0">
							<span class="govuk-hint">Not recorded yet</span>
							
						  </ul>
                      </td>
                    </tr>

                    <tr class="govuk-table__row govuk-table__row--selected">
                      <td class="govuk-table__cell">
                        <div
                          class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                          <input type="checkbox" class="govuk-checkboxes__input"
                            id="prisoner-david_francis-2">
                          <label class="govuk-label govuk-checkboxes__label"
                            for="prisoner-david_francis-2">
                            <span class="govuk-visually-hidden">Select Tommy-Lee Knox, C8361E</span>
                          </label>
                        </div>
                      </td>
                      <td class="govuk-table__cell" scope="col">
                        <a href="#" class="govuk-link--no-visited-state"><b>Knox, </b>Tommy-Lee</a><br>
                        <span class="govuk-hint govuk-!-font-size-16">C8361E</span>
                      </td> 
                      <td class="govuk-table__cell" data-sort-value="" scope="col">
						
                        <ul class="govuk-list govuk-!-margin-0">
							        <span class="govuk-hint">Not recorded yet</span>
							
						          </ul>
                      </td>
                    </tr>

                    
                  </tbody>
                </table>
              </div>
            </div> 
                   


            <div class="govuk-summary-card">
              <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">Appointment history</h2> 
              </div>
              <div class="govuk-summary-card__content">
                <dl class="govuk-summary-list">
             
                  <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                      Created by
                    </dt>
                    <dd class="govuk-summary-list__value">
                      J. Smith
                    </dd>
                    </div>
                    <div class="govuk-summary-list__row">
                      <dt class="govuk-summary-list__key">
                        Date created
                      </dt>
                      <dd class="govuk-summary-list__value">
                        29 June 2023
                      </dd>
                    </div>
                     <!-- <div class="govuk-summary-list__row">
                      <dt class="govuk-summary-list__key">
                        Last edited by
                      </dt>
                      <dd class="govuk-summary-list__value">
                        B. Milman
                      </dd>
                      </div>
                      <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                          Date last edited
                        </dt>
                        <dd class="govuk-summary-list__value">
                          22 June 2023
                        </dd>
                      </div>  -->
                 </dl>
              </div>
            </div>
             

          </div>
        </div> 



</main>

</div>
{% include '../_includes/attendance-toolbar-2.html' %}

</form>
{% endblock %}
  

    {% block pageScripts %}
    <script type="text/javascript">
      $(document).ready(function () {
        function toggleToolbar(btn) {
          let checkbox = $('.app-toolbar-table input[type="checkbox"]')
          let count = checkbox.filter(':checked').length - $('th .moj-multi-select__checkbox input:checkbox:checked').length
    
          if (!btn.data('html')) {
            $.each(btn, function () {
              $(this).attr('data-html', $(this).html())
            })
    
            $('#app-selected-count').attr('data-html', $('#app-selected-count').html())
          }
    
          if (checkbox.is(':checked')) {
            let countText = (count > 1) ? "attendees" : "attendee"
    
            $('#app-selected-count').html(count + " " + countText + " selected")
    
            $.each(btn, function () {
              $(this).attr("disabled", false).html($(this).data('html'))
            })
    
            $('.app-attendance-sticky-bar--bottom').addClass('active').attr("aria-disabled", false).find('.govuk-button-group').show()
          } else {
            $.each(btn, function () {
              $(this).attr("disabled", true).html($(this).data('html'))
            })
    
            $('.app-attendance-sticky-bar--bottom').removeClass('active').attr("aria-disabled", true).find('.govuk-button-group').hide()
            $('#app-selected-count').html($('#app-selected-count').data('html'))
          }
        }
        $(window).load(function () {
          toggleToolbar($('.app-attendance-btn'))
        })
        $('.app-toolbar-table input[type="checkbox"]').on('change', function () {
          toggleToolbar($('.app-attendance-btn'))
        })
    
        const el = document.querySelector(".app-attendance-sticky-bar--bottom")
        const observer = new IntersectionObserver(
          ([e]) => e.target.classList.toggle("is-pinned", e.intersectionRatio < 1),
          { threshold: [1] }
        );
    
        observer.observe(el);
      })
    </script>
     
    {% endblock %}
    